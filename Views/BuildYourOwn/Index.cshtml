@model IEnumerable<DIYFilipinoDessert.Models.DessertKit>

@{
    ViewData["Title"] = "BuildYourOwn";
    decimal price = 0;
}

<div class="mb-4 text-center">
    <h2 class="fw-bold d-inline-block ms-2" style="color:#5A250F; padding-top: 50px;">Build Your Own</h2>
</div>

<p class="text-center lead" style="color:#5A250F;">
    Customize your own Filipino dessert kit.
</p>

<div class="buildkit-wrapper card shadow rounded-4 p-4 mb-5" style="background: #fff; border: 1px solid #A3D86B; max-width: 800px; margin: 48px auto; transform: none;">
    <form asp-controller="Cart" asp-action="AddToCart" method="post">
        <h4 class="fw-bold mt-2 mb-4 text-center" style="color:#A3D86B;">How it works:</h4>
        <div class="sweetimpla-divider mb-3"></div>
        <ol class="mb-4 ps-1" style="font-size:1.08rem;">
            <li class="mb-2" style="margin: 20px 0; list-style-type: none;">
                <b>1. Choose a base:</b> <br>
                <select id="base-select" name="DessertKitId" class="form-select mt-1 mb-2" style="max-width:300px;">
                    @foreach (var kit in Model)
                    {
                        <option value="@kit.Id" data-price="@kit.Price">@kit.Name</option>
                    }
                </select>
            </li>

            <li class="mb-2" style="margin: 20px 0; list-style-type: none;">
                <b>2. Select toppings:</b> <br>

                <div class="form-check">
                    <input name="Toppings" class="topping-option" type="checkbox" style="accent-color: #A3D86B;" id="cheese" value="Cheese" data-price="50" />
                    <label class="form-check-label" for="cheese">Cheese <span class="text-muted" style="color: #5A250F">- ₱50</span></label>
                </div>

                <div class="form-check">
                    <input name="Toppings" class="topping-option" type="checkbox" style="accent-color: #A3D86B;" id="ube" value="Ube Halaya" data-price="40" />
                    <label class="form-check-label" for="ube">Ube Halaya <span class="text-muted" style="color: #5A250F">- ₱40</span></label>
                </div>

                <div class="form-check">
                    <input name="Toppings" class="topping-option" type="checkbox" style="accent-color: #A3D86B;" id="latik" value="Latik" data-price="30" />
                    <label class="form-check-label" for="latik">Latik <span class="text-muted" style="color: #5A250F">- ₱30</span></label>
                </div>

                <div class="form-check">
                    <input name="Toppings" class="topping-option" type="checkbox" style="accent-color: #A3D86B;" id="coconut" value="Toasted Coconut" data-price="20" />
                    <label class="form-check-label" for="coconut">Toasted Coconut <span class="text-muted" style="color: #5A250F">- ₱20</span></label>
                </div>
            </li>

            <li class="mb-2" style="margin: 20px 0; list-style-type: none;">
                <b>3. Optional extras:</b> <br>

                <div class="form-check">
                    <input name="Extras" class="extra-option" type="checkbox" style="accent-color: #A3D86B;" id="recipeCard" value="Printed Recipe Card" data-price="30" />
                    <label class="form-check-label" for="recipeCard">Printed recipe card <span class="text-muted" style="color: #5A250F">- ₱30</span></label>
                </div>

                <div class="form-check">
                    <input name="Extras" class="extra-option" type="checkbox" style="accent-color: #A3D86B;" id="tools" value="Reusable Measuring Tools" data-price="50" />
                    <label class="form-check-label" for="tools">Reusable measuring tools <span class="text-muted" style="color: #5A250F">- ₱50</span></label>
                </div>
            </li>

            <li class="mb-2" style="margin: 20px 0; list-style-type: none;">
                <b>4. Name or notes (optional):</b> <br>
                <input class="form-control mt-1" id="kit-notes" name="Notes" style="max-width:400px;" type="text" placeholder="e.g., For Mom's Birthday" />
            </li>
        </ol>

        <div class="mb-3" style="margin: 20px 0;">
            <strong>Price:</strong> <span id="kit-total-price">₱0.00</span>
            <input type="hidden" name="Price" id="hidden-kit-price" value="0" />
            <span class="text-muted">(Updates as you choose items)</span>
        </div>

        <div class="mb-3">
            <button type="submit" class="btn btn-success" style="background:#A3D86B; color:#fff; border:none;">
                Confirm and Add to Cart
            </button>
        </div>

        <div class="alert alert-info rounded-3 text-center" style="background: rgba(255, 227, 168, 0.75); color:#5A250F; border: none; border-radius: 20px; font-weight: bold; margin-top: 20px;">
            <strong>Your Kit Summary:</strong>
            <ul class="mb-0" id="kit-summary" style="color:#5A250F; list-style: none;">
                <li style="list-style-type: none;">Base: <span class="fw-bold" id="summary-base">-</span></li>
                <li style="list-style-type: none;">Toppings: <span class="fw-bold" id="summary-toppings">-</span></li>
                <li style="list-style-type: none;">Extras: <span class="fw-bold" id="summary-extras">-</span></li>
                <li style="list-style-type: none;">Notes: <span class="fw-bold" id="summary-notes">-</span></li>
            </ul>
        </div>
    </form>
</div>